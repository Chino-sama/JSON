<!DOCTYPE html>
<html>
<head>
	<title>JSON and AJAX :d</title>
	<link rel="stylesheet" type="text/css" href="app.css">
	<script>
		function loadData() {
			// crear petición
			let xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function () {
				console.log(this.readyState, this.status, this.statusText);
			}
			
			xhr.open('GET', 'https://chino-sama.github.io/JSON/index.json');

			// procesar petición
			xhr.onload = function () {
				if (this.readyState === 4 && this.status === 200) {
					// modificar contenido de html
					let res = JSON.parse(this.response);
					let emptyDiv = document.getElementById("loaded-info");

					let html = '';
					res.forEach((item) => {
						html += '<p>';
						html += 
							item.nombre + 
							' ' + 
							item.apellido +
							' nació el' +
							item.birth +
							' ' +
							item.likes.forEach((like) => {
								return like + 'y ';
							}) +
							item.dislikes.forEach((dis) => {
								return dis + 'y ';
							})
¡						html += '</p>';
					});
					emptyDiv.insertAdjacentHTML('beforeend', html);
					// esconder el botón
					let btn = document.getElementById("btn");
					btn.className = "hide";
				} else {
					// Ps no iegó
					alert('Ejplotó' + this.status);
				}
			}

			// enviar petición
			xhr.send();
		}
	</script>
</head>
<body>
	<h1>JSON and AJAX :d</h1>
	<h3>Permitir que AJAX modifique el contenido</h3>
	<button id="btn" onclick="loadData()">
		Mostrar información sin recargar la pantalla ._.
	</button>
	<div id="loaded-info">
		
	</div>
</body>
</html>